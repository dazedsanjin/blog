/*
 * @Author: shaoqing
 * @Date: 2021-07-10 15:46:52
 * @LastEditTime: 2021-07-13 21:55:58
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: \react-blog\src\pages\animation\animation.js
 */
import React, { useState, useEffect } from 'react'
import { useHistory } from 'react-router-dom'
import Gsap from 'gsap'
import './animation.scss'

function Animation() {
  const [tl] = useState(Gsap.timeline())
  const history = useHistory()

  /**
   * @description: 初始化TimeLine
   * @param {*}
   * @return {*}
   */
  function initTimeline() {
    tl.to('.curve', { duration: 2, strokeDashoffset: 0 })

    tl.addLabel('cleanCurve')

    tl.to('.curve', { duration: 1, strokeDashoffset: -3367 }, 'cleanCurve')

    tl.set('.eraser', { opacity: 1 }, 'cleanCurve')
      .to('.eraser', { duration: 1, translateX: 500 }, 'cleanCurve')
      .to('.eraser', { duration: 0.25, translateY: 100 }, 'cleanCurve')
      .to('.eraser', { duration: 0.25, translateY: 0 }, 'cleanCurve+=.25')
      .to('.eraser', { duration: 0.25, translateY: -120 }, 'cleanCurve+=.5')
      .to('.eraser', { duration: 0.25, translateY: 100 }, 'cleanCurve+=.75')
      .set('.eraser', { opacity: 0 }, 'cleanCurve+=.9')

    tl.set(['.dj path'], { opacity: 1 }).from(['.dj path'], {
      duration: 1,
      scaleX: 0,
      scaleY: 0,
      transformOrigin: 'center',
      stagger: 0.2,
      ease: 'bounce.easeOut'
    })

    tl.set('.main .goto', { opacity: 1 }).from(
      ['.goto .arrow path', '.goto .more text'],
      {
        duration: 0.5,
        scaleX: 0,
        scaleY: 0,
        transformOrigin: 'center',
        stagger: 0.2,
        ease: 'bounce.easeOut'
      }
    )
  }

  useEffect(() => {
    initTimeline()
  })

  /**
   * @description: 跳转至主页
   * @param {*}
   * @return {*}
   */
  function gotoHome() {
    history.push('/home')
  }

  return (
    <div className="animation">
      <svg
        className="line"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 793.79 479.74"
        width="200"
        height="200"
      >
        <path
          className="curve"
          stroke="#fff"
          fill="none"
          d="M3,354S32,32,76,170s62,79,69,26-9-341,63-95S315,535,323,460s10-411,36-244,50,296,74,249S441-9,488,79s5,369,66,383S535-94,611,43,792,259,792,259"
        />
        <path
          className="eraser"
          d="M290.422,79.244L220.034,8.857c-11.794-11.795-30.986-11.795-42.78,0C175.866,10.245,12.971,173.14,8.867,177.244    c-11.822,11.821-11.824,30.957,0,42.78l70.388,70.388c11.821,11.822,30.957,11.824,42.78,0    c1.046-1.046,165.357-165.357,168.388-168.388C302.244,110.203,302.246,91.066,290.422,79.244z M110.367,278.744    c-5.374,5.373-14.071,5.373-19.446,0l-70.388-70.388c-5.373-5.374-5.375-14.071,0-19.446l34.61-34.61l89.834,89.834    L110.367,278.744z M278.755,110.357l-122.111,122.11l-89.833-89.833l122.11-122.111c5.374-5.374,14.071-5.374,19.446,0    l70.388,70.388C284.129,96.285,284.129,104.983,278.755,110.357z"
          fill="#fff"
        />
      </svg>
      <main className="main">
        <svg
          className="dj"
          xmlns="http://www.w3.org/2000/svg"
          width="120"
          height="120"
          x="0"
          y="0"
          viewBox="0 0 512.00007 512"
        >
          <g transform="matrix(1,-2.4492935982947064e-16,2.4492935982947064e-16,1,-1.1368683772161603e-13,5.684341886080802e-14)">
            <path
              d="m499.890625 429.242188c-10.015625-37.457032-44.359375-63.199219-83.121094-62.308594h-1.007812l-1.046875-5.074219c-3.714844-12.863281-15.882813-21.40625-29.242188-20.527344h-52.671875v-26.191406c34.097657-4.324219 59.675781-33.300781 59.734375-67.675781v-8.53125h25.597656c10.8125-.035156 20.4375-6.867188 24.027344-17.066406h10.105469c14.132813-.015626 25.585937-11.46875 25.601563-25.601563v-34.132813c-.015626-14.132812-11.46875-25.582031-25.601563-25.597656h-10.105469c-2.574218-7.230468-8.265625-12.917968-15.492187-15.496094v-27.171874c-.058594-51.816407-42.050781-93.8085942-93.867188-93.867188h-153.601562c-51.816407.0585938-93.808594 42.050781-93.867188 93.867188v27.171874c-7.226562 2.578126-12.917969 8.265626-15.492187 15.496094h-10.105469c-14.132813.015625-25.585937 11.464844-25.601563 25.597656v34.132813c.015626 14.132813 11.46875 25.585937 25.601563 25.601563h10.105469c3.59375 10.199218 13.214844 17.03125 24.027344 17.066406h25.597656v8.53125c.058594 34.375 25.636718 63.351562 59.734375 67.675781v26.191406h-52.621094c-13.339844-.878906-25.5 7.640625-29.226563 20.480469l-1.058593 5.121094h-1.0625c-38.757813-.890625-73.101563 24.847656-83.121094 62.300781l-7.933594 32.148437c-2.785156 11.285157-4.1874998 22.867188-4.175781 34.488282v7.59375c0 4.714844 3.820312 8.535156 8.535156 8.535156h494.929688c4.714844 0 8.535156-3.820312 8.535156-8.535156v-7.59375c.011719-11.617188-1.390625-23.195313-4.175781-34.472656zm-312.15625-70.84375h137.660156c-9.875 10.96875-30.328125 25.601562-69.394531 25.601562s-59.523438-14.632812-69.394531-25.601562zm-51.199219-221.882813v-32.898437c0-28.898438 26.390625-52.417969 58.832032-52.417969h33.4375c10.789062 4.019531 18.136718 14.097656 18.660156 25.601562 0 4.710938 3.824218 8.53125 8.535156 8.53125 4.714844 0 8.535156-3.820312 8.535156-8.53125.125-9.25-2.878906-18.273437-8.523437-25.601562h60.621093c32.441407 0 58.832032 23.519531 58.832032 52.417969v72.011718c-9.332032-3.609375-15.898438-12.089844-17.066406-22.027344 0-2.558593-1.148438-4.976562-3.125-6.597656-1.976563-1.621094-4.574219-2.269531-7.082032-1.765625-22.507812 4.023438-45.421875-4.550781-59.765625-22.359375-1.914062-2.542968-5.085937-3.8125-8.230469-3.296875-19.128906 3.042969-38.730468-.210937-55.855468-9.269531-14.015625-6.066406-28.515625-12.339844-47.210938-7.65625-26.371094 6.589844-32.214844 39.066406-32.921875 62.222656-4.609375-8.773437-7.230469-18.460937-7.671875-28.363281zm281.597656 85.351563h-25.597656v-85.332032h25.597656c4.710938.003906 8.53125 3.820313 8.535157 8.53125v68.265625c-.003907 4.710938-3.824219 8.53125-8.535157 8.535157zm42.667969-59.734376v34.132813c-.003906 4.710937-3.824219 8.53125-8.535156 8.535156h-8.53125v-51.199219h8.53125c4.710937.003907 8.53125 3.820313 8.535156 8.53125zm-281.601562-145.066406h153.601562c42.394531.046875 76.753907 34.40625 76.800781 76.800782v25.597656h-17.066406v-15.847656c0-38.316407-34.050781-69.484376-75.902344-69.484376h-121.265624c-41.851563 0-75.902344 31.167969-75.902344 69.484376v15.847656h-17.066406v-25.597656c.046874-42.394532 34.40625-76.753907 76.800781-76.800782zm-128 179.199219v-34.132813c.003906-4.710937 3.824219-8.527343 8.535156-8.53125h8.53125v51.199219h-8.53125c-4.710937-.003906-8.53125-3.824219-8.535156-8.535156zm42.667969 25.601563c-4.710938-.003907-8.53125-3.824219-8.535157-8.535157v-68.265625c.003907-4.710937 3.824219-8.527344 8.535157-8.53125h25.597656v85.332032zm42.667968 25.597656v-63.734375c3.5625 4.265625 7.714844 8.003906 12.332032 11.101562 2.777343 1.851563 6.378906 1.914063 9.21875.160157 2.839843-1.753907 4.394531-5.003907 3.980468-8.316407-1.972656-15.765625-2.671875-61.992187 19.199219-67.46875 13.082031-3.25 23.320313 1.160157 36.289063 6.777344 18.6875 9.542969 39.757812 13.414063 60.617187 11.132813 16.429687 18.234374 40.359375 27.863281 64.839844 26.089843 5.054687 15 17.207031 26.519531 32.453125 30.761719v53.496094c-.027344 28.265625-22.933594 51.171875-51.199219 51.203125h-136.53125c-28.265625-.03125-51.171875-22.9375-51.199219-51.203125zm59.730469 68.269531h119.46875v25.597656h-119.46875zm-175.523437 149.75 7.941406-32.171875c7.902344-28.890625 34.089844-48.96875 64.042968-49.109375l-22.878906 110.730469h-52.777344c.0625-9.925782 1.292969-19.8125 3.671876-29.449219zm388.859374 29.449219h-322.328124l23.242187-112.480469c10.84375 12.351563 26.65625 19.183594 43.085937 18.613281 10.699219 1.691406 20.5625 6.804688 28.109376 14.574219 3.359374 3.195313 8.648437 3.125 11.921874-.152344 3.273438-3.277343 3.332032-8.570312.132813-11.921875-2-2-20.140625-19.566406-40.164063-19.566406-11.496093 0-32.902343-5.113281-34.027343-24.070312 2.199219-1.003907 4.585937-1.523438 7.003906-1.53125h38.914063c7.410156 12.574218 31.316406 42.667968 90.503906 42.667968s83.09375-30.09375 90.507812-42.667968h38.964844c2.398438.007812 4.769531.523437 6.957031 1.515624-1.109375 18.96875-22.53125 24.085938-34.027343 24.085938-20.023438 0-38.164063 17.566406-40.164063 19.566406-3.199219 3.351563-3.140625 8.644532.132813 11.921875 3.273437 3.277344 8.5625 3.347657 11.921874.152344 7.546876-7.769531 17.410157-12.882813 28.109376-14.574219 16.449218.574219 32.285156-6.277344 43.125-18.664062l23.207031 112.53125zm32.550782 0-22.832032-110.730469c29.933594.160156 56.101563 20.238281 64 49.113281l7.933594 32.183594c2.382813 9.632812 3.617188 19.511719 3.679688 29.433594zm0 0"
              fill="#fff"
            />
            <path
              d="m213.332031 204.800781c4.714844 0 8.535157-3.820312 8.535157-8.535156v-17.066406c0-4.710938-3.820313-8.53125-8.535157-8.53125-4.710937 0-8.53125 3.820312-8.53125 8.53125v17.066406c0 4.714844 3.820313 8.535156 8.53125 8.535156zm0 0"
              fill="#fff"
            />
            <path
              d="m298.667969 204.800781c4.710937 0 8.53125-3.820312 8.53125-8.535156v-17.066406c0-4.710938-3.820313-8.53125-8.53125-8.53125-4.714844 0-8.535157 3.820312-8.535157 8.53125v17.066406c0 4.714844 3.820313 8.535156 8.535157 8.535156zm0 0"
              fill="#fff"
            />
            <path
              d="m213.332031 238.933594c0 1.042968.484375 25.601562 42.667969 25.601562s42.667969-24.558594 42.667969-25.601562c.023437-4.757813-3.769531-8.65625-8.527344-8.765625-2.234375-.054688-4.398437.792969-6.003906 2.351562-1.601563 1.5625-2.507813 3.703125-2.515625 5.9375-.421875 3.121094-6.3125 9.007813-25.621094 9.007813s-25.199219-5.886719-25.601562-8.53125c0-4.714844-3.820313-8.535156-8.53125-8.535156-4.714844 0-8.535157 3.820312-8.535157 8.535156zm0 0"
              fill="#fff"
            />
            <path
              d="m221.867188 418.132812c-4.714844 0-8.535157 3.820313-8.535157 8.535157-.402343 13.542969-5.558593 26.511719-14.566406 36.632812-2.21875 2.140625-3.105469 5.316407-2.324219 8.296875.78125 2.984375 3.109375 5.316406 6.09375 6.097656 2.984375.777344 6.15625-.109374 8.296875-2.328124 12.171875-13.347657 19.121094-30.640626 19.566407-48.699219 0-4.714844-3.820313-8.535157-8.53125-8.535157zm0 0"
              fill="#fff"
            />
            <path
              d="m298.667969 426.640625c-.007813-4.710937-3.835938-8.527344-8.546875-8.519531-4.714844.007812-8.527344 3.832031-8.519532 8.546875.445313 18.058593 7.394532 35.351562 19.566407 48.699219 3.347656 3.234374 8.667969 3.1875 11.960937-.105469 3.292969-3.289063 3.339844-8.613281.105469-11.960938-8.960937-10.160156-14.109375-23.121093-14.566406-36.660156zm0 0"
              fill="#fff"
            />
          </g>
        </svg>
        <div className="goto" onClick={gotoHome}>
          <svg
            className="arrow"
            xmlns="http://www.w3.org/2000/svg"
            width="40"
            height="40"
            viewBox="0 0 512 512"
          >
            <path
              d="M506.134,241.843c-0.006-0.006-0.011-0.013-0.018-0.019l-104.504-104c-7.829-7.791-20.492-7.762-28.285,0.068    c-7.792,7.829-7.762,20.492,0.067,28.284L443.558,236H20c-11.046,0-20,8.954-20,20c0,11.046,8.954,20,20,20h423.557    l-70.162,69.824c-7.829,7.792-7.859,20.455-0.067,28.284c7.793,7.831,20.457,7.858,28.285,0.068l104.504-104    c0.006-0.006,0.011-0.013,0.018-0.019C513.968,262.339,513.943,249.635,506.134,241.843z"
              fill="#ffffff"
              data-original="#000000"
            />
          </svg>
          <svg
            className="more"
            xmlns="http://www.w3.org/2000/svg"
            width="60"
            height="20"
            version="1.1"
          >
            <text x="0" y="15" fill="#fff">
              More
            </text>
          </svg>
        </div>
      </main>
    </div>
  )
}

export default Animation
